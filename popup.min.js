(function(d){var f=function(a,c){this.__construct(a,c)},k=0,h=0;f.prototype={defaultWindowOptions:{width:d.screen.width,height:d.screen.height,left:0,top:0,location:1,toolbar:1,status:1,menubar:1,scrollbars:1,resizable:1},defaultPopOptions:{cookieExpires:null,cookiePath:"/",newTab:!0,blur:!0,chromeDelay:50},__chromeNewWindowOptions:{scrollbars:0},__construct:function(a,c){this.url=a;this.index=k++;this.name="ChipPopunder_"+this.index;this.executed=!1;this.setOptions(c);this.register()},register:function(){if(!this.isExecuted()){var a=
this,c,b,g=[],e=function(f){if(a.shouldExecute())for(b in h=(new Date).getTime(),a.setExecuted(),c=a.options.newTab?d.open(a.url):d.open(a.url,this.url,a.getParams()),a.options.blur?(a.fireEvent(c,"blur"),a.fireEvent(d,"focus")):(a.fireEvent(c,"focus"),a.fireEvent(d,"blur")),g)a.detachEvent("click",e,g[b])},f=function(b){if(a.isExecuted())a.detachEvent("mousemove",f);else try{b.originalTarget&&"undefined"==typeof b.originalTarget[a.name]&&(b.originalTarget[a.name]=!0,a.attachEvent("click",e,b.originalTarget),
g.push(b.originalTarget))}catch(c){}};this.attachEvent("mousemove",f);this.attachEvent("click",e,d);g.push(d);this.attachEvent("click",e,document);g.push(document)}},shouldExecute:function(){return this.isChrome()&&h&&h+this.options.chromeDelay>(new Date).getTime()?!1:!this.isExecuted()},isChrome:function(){return!!d.chrome},isExecuted:function(){return!(!this.executed&&!this.getCookie(this.name))},setExecuted:function(){this.executed=!0;this.setCookie(this.name,1,this.cookieExpires,this.cookiePath)},
setOptions:function(a){this.options=this.mergeObject(this.defaultWindowOptions,this.defaultPopOptions,a||{});if(!this.options.newTab&&this.isChrome())for(var c in this.__chromeNewWindowOptions)this.options[c]=this.__chromeNewWindowOptions[c]},getParams:function(){var a="",c;for(c in this.options)"undefined"!=typeof this.defaultWindowOptions[c]&&(a+=(a?",":"")+c+"="+this.options[c]);return a},fireEvent:function(a,c){if(!a)return!1;if("function"==typeof a[c])a[c]();else{var b;document.createEvent?(b=
document.createEvent("HTMLEvents"),b.initEvent(c,!0,!0)):(b=document.createEventObject(),b.eventType=c);b.eventName=b;document.createEvent?a.dispatchEvent(b):a.fireEvent("on"+b.eventType,b)}},detachEvent:function(a,c,b){b=b||d;return b.removeEventListener?b.removeEventListener(a,c):b.detachEvent("on"+a,c)},attachEvent:function(a,c,b){b=b||d;return b.addEventListener?b.addEventListener(a,c):b.attachEvent("on"+a,c)},mergeObject:function(){var a={},c,b;for(c in arguments)for(b in arguments[c])a[b]=arguments[c][b];
return a},getCookie:function(a){return(a=document.cookie.match(new RegExp(a+"=[^;]+","i")))?decodeURIComponent(a[0].split("=")[1]):null},setCookie:function(a,c,b,d){if(null===b||"undefined"==typeof b)b="";else{var e;"number"==typeof b?(e=new Date,e.setTime(e.getTime()+36E5*b)):e=b;b="; expires="+e.toUTCString()}document.cookie=a+"="+escape(c)+b+"; path="+(d||"/")}};f.make=function(a,c){return new this(a,c)};d.SmartPopunder=f})(window);